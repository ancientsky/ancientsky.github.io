<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…ç´šç´°èŒå¤§æˆ°ï¼šæŠ—ç”Ÿç´ æŠ—è—¥æ€§ç°¡å ±</title>
    
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- å¼•å…¥ Babel ç”¨ä¾†è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- è‡ªå®šç¾©æ¨£å¼èˆ‡å‹•ç•« -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #000;
            overflow: hidden; /* é˜²æ­¢æ²å‹•ï¼Œä¿æŒç°¡å ±æ„Ÿ */
        }
        
        .animate-bounce-slow {
            animation: bounce 3s infinite;
        }
        
        .animate-shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .boss-hit {
            animation: flashRed 0.2s ease-in-out;
        }

        @keyframes flashRed {
            0% { background-color: rgba(255, 0, 0, 0); }
            50% { background-color: rgba(255, 0, 0, 0.5); }
            100% { background-color: rgba(255, 0, 0, 0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ç°¡æ˜“ Icon çµ„ä»¶ (é¿å…ä¾è³´å¤–éƒ¨åœ–åº«è¼‰å…¥å•é¡Œ) ---
        const IconSkull = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12.5 17-.5-1-.5 1h1z"/><circle cx="9" cy="12" r="1"/><circle cx="15" cy="12" r="1"/><path d="M8 20v2h8v-2"/><path d="M12.5 17l-.5-1-.5 1h1z"/><path d="M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20"/></svg>
        );
        const IconSword = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="14.5 17.5 3 6 3 3 6 3 17.5 14.5"/><line x1="13" y1="19" x2="19" y2="13"/><line x1="16" y1="16" x2="20" y2="20"/><line x1="19" y1="21" x2="21" y2="19"/></svg>
        );
        const IconShield = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        );
        const IconUserX = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="18" y1="8" x2="23" y2="13"/><line x1="23" y1="8" x2="18" y2="13"/></svg>
        );
        const IconCheck = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        );
        const IconChevronRight = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>
        );
        const IconChevronLeft = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m15 18-6-6 6-6"/></svg>
        );
        const IconStethoscope = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v6"/><path d="M9 21v-6a6 6 0 0 0 6-6v-3"/></svg>
        );

        // --- è³‡æ–™ ---
        const slides = [
            {
                id: 'intro',
                type: 'title',
                title: 'å¾®è§€ä¸–ç•Œçš„é€†è¥²',
                subtitle: 'ç•¶ç´°èŒç©¿ä¸Šé‹¼éµäººè£ç”²ï¼šæŠ—ç”Ÿç´ æŠ—è—¥æ€§',
                icon: <IconSkull className="w-20 h-20 text-red-500 animate-bounce" />,
                bg: 'bg-slate-900'
            },
            {
                id: 'enemy',
                type: 'content',
                title: 'Level 1: èªæ¸…ä½ çš„æ•µäºº',
                content: 'æ„Ÿå†’é€šå¸¸æ˜¯ã€Œç—…æ¯’ã€å¼•èµ·çš„ï¼ŒæŠ—ç”Ÿç´ åªæ®ºã€Œç´°èŒã€ï¼',
                subContent: 'ç”¨æŠ—ç”Ÿç´ æ®ºç—…æ¯’ï¼Œå°±åƒç”¨ç‰©ç†æ”»æ“Šæ‰“é¬¼é­‚ï¼Œå®Œå…¨ç„¡æ•ˆå•Šï¼ğŸ‘»',
                visual: 'vs',
                bg: 'bg-indigo-900'
            },
            {
                id: 'weapon',
                type: 'content',
                title: 'Level 2: äººé¡çš„ç§˜å¯†æ­¦å™¨',
                content: 'æŠ—ç”Ÿç´ æ˜¯ç´°èŒçš„ã€Œç‹™æ“Šæ‰‹ã€ã€‚',
                subContent: 'è‡ªå¾ 1928 å¹´ç›¤å°¼è¥¿æ—ç™¼ç¾å¾Œï¼Œäººé¡ä»¥ç‚ºè‡ªå·±ç„¡æ•µäº†... ä½†æˆ‘å€‘å¤ªå¤©çœŸäº†ã€‚',
                icon: <IconSword className="w-16 h-16 text-yellow-400" />,
                bg: 'bg-blue-900'
            },
            {
                id: 'evolution',
                type: 'simulation',
                title: 'Level 3: ç´°èŒçš„ä¿®ç·´å ´',
                content: 'æŠ—è—¥æ€§æ˜¯æ€éº¼ä¾†çš„ï¼Ÿ',
                subContent: 'é€™æ˜¯ä¸€å ´ã€Œå¤§é€ƒæ®ºã€éŠæˆ²ã€‚æ´»ä¸‹ä¾†çš„é‚£å€‹ 1%ï¼Œå°±æ˜¯æœ€å¼·çš„èè‹±æ€ªã€‚',
                bg: 'bg-gray-900'
            },
            {
                id: 'doctor_sim',
                type: 'doctor_sim',
                title: 'Level 4: åº¸é†« vs ç¥é†«',
                content: 'ä½ æ˜¯é†«ç”Ÿï¼Œé‡åˆ°é€™ç¨®ç‹€æ³ï¼Œä½ é–‹ä¸é–‹æŠ—ç”Ÿç´ ï¼Ÿ',
                bg: 'bg-emerald-900'
            },
            {
                id: 'mistake',
                type: 'content',
                title: 'Level 5: äººé¡çš„è‡ªæ®ºè¡Œç‚º',
                content: 'ã€Œæˆ‘è¦ºå¾—å¥½å¤šäº†ï¼Œè—¥å°±ä¸åƒäº†å§ï¼Ÿã€',
                subContent: 'é€™æ˜¯æœ€å±éšªçš„ä¸€å¥è©±ï¼ä½ æ’¤é€€äº†ï¼Œå‰©ä¸‹çš„ç´°èŒå°±é–‹é¦™æª³æ…¶ç¥ï¼Œç„¶å¾Œå‡ç´šè£å‚™ã€‚',
                icon: <IconUserX className="w-16 h-16 text-orange-500" />,
                bg: 'bg-red-900'
            },
            {
                id: 'boss_battle',
                type: 'boss_battle',
                title: 'FINAL BOSS: è¶…ç´šç´°èŒç‹',
                content: 'ç”¨ä½ çš„çŸ¥è­˜æ“Šæ•—å®ƒï¼',
                bg: 'bg-rose-950'
            },
            {
                id: 'action',
                type: 'list',
                title: 'æˆ°é¬¥æº–å‰‡ (å››ä¸åŸå‰‡)',
                items: [
                    'ä¸ä¸»å‹•è¦æ±‚æŠ—ç”Ÿç´ ',
                    'ä¸éš¨ä¾¿è‡ªå·±è²·æŠ—ç”Ÿç´ ',
                    'ä¸åƒåˆ¥äººçš„æŠ—ç”Ÿç´ ',
                    'ä¸éš¨ä¾¿åœè—¥ (é†«ç”Ÿèªªåœæ‰åœ)'
                ],
                bg: 'bg-green-900'
            },
            {
                id: 'end',
                type: 'title',
                title: 'æ­å–œé€šé—œï¼',
                subtitle: 'ä½ ç¾åœ¨æ˜¯åˆæ ¼çš„ã€ŒæŠ—ç”Ÿç´ æŒ‡æ®å®˜ã€äº†ï¼',
                icon: <IconCheck className="w-24 h-24 text-green-400" />,
                bg: 'bg-slate-900'
            }
        ];

        // --- ä¸»ç¨‹å¼ ---
        function App() {
            const [currentSlide, setCurrentSlide] = useState(0);
            
            // Simulation State
            const [bacteria, setBacteria] = useState(Array(12).fill({ status: 'normal' }));
            const [simStep, setSimStep] = useState(0);

            // Doctor Sim State
            const [docScenario, setDocScenario] = useState('sneeze'); // sneeze, fever
            const [docResult, setDocResult] = useState(null);

            // Boss Battle State
            const [bossHp, setBossHp] = useState(100);
            const [bossStatus, setBossStatus] = useState('alive'); // alive, dead
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [battleLog, setBattleLog] = useState('è¶…ç´šç´°èŒç‹æ­£åœ¨å˜²ç¬‘ä½ çš„å…ç–«ç³»çµ±...');
            const [isShaking, setIsShaking] = useState(false);

            const questions = [
                { q: "æ„Ÿå†’æµé¼»æ°´ï¼Œæ‡‰è©²é¦¬ä¸ŠåƒæŠ—ç”Ÿç´ å—ï¼Ÿ", a: false, correctMsg: "æ²’éŒ¯ï¼æ„Ÿå†’é€šå¸¸æ˜¯ç—…æ¯’ï¼ŒæŠ—ç”Ÿç´ ç„¡æ•ˆï¼(æ”»æ“ŠæˆåŠŸ)", wrongMsg: "éŒ¯ï¼äº‚åƒæŠ—ç”Ÿç´ æœƒè®“ç´°èŒè®Šå¼·ï¼(ä½ å—åˆ°å‚·å®³)" },
                { q: "ç—‡ç‹€å¥½è½‰äº†ï¼Œå‰©ä¸‹çš„æŠ—ç”Ÿç´ å¯ä»¥ç•™è‘—ä¸‹æ¬¡åƒå—ï¼Ÿ", a: false, correctMsg: "æ¼‚äº®ï¼ä¸€å®šè¦æŠŠç™‚ç¨‹åƒå®Œï¼Œå¾¹åº•æ¶ˆæ»…ç´°èŒï¼(çˆ†æ“Š)", wrongMsg: "å¤§éŒ¯ç‰¹éŒ¯ï¼åœè—¥æœƒé¤Šå‡ºè¶…ç´šç´°èŒï¼(BOSSå›è¡€)" },
                { q: "é˜¿å¬¤å‰©ä¸‹çš„æŠ—ç”Ÿç´ ï¼Œæˆ‘å¯ä»¥æ‹¿ä¾†åƒå—ï¼Ÿ", a: false, correctMsg: "æ­£ç¢ºï¼åˆ¥äººçš„è—¥ä¸èƒ½äº‚åƒï¼(BOSS ç€•è‡¨å´©æ½°)", wrongMsg: "åƒè¬ä¸è¡Œï¼åŠ‘é‡å’Œç¨®é¡éƒ½ä¸ä¸€æ¨£ï¼" }
            ];

            // Keyboard navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'ArrowRight') nextSlide();
                    if (e.key === 'ArrowLeft') prevSlide();
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentSlide]);

            const nextSlide = () => {
                if (currentSlide < slides.length - 1) setCurrentSlide(c => c + 1);
            };

            const prevSlide = () => {
                if (currentSlide > 0) setCurrentSlide(c => c - 1);
            };

            // --- Logic: Simulation ---
            const runSimulation = () => {
                if (simStep === 0) { // Attack
                    setBacteria(prev => prev.map((b, i) => i % 4 !== 0 ? { ...b, status: 'dead' } : b));
                    setSimStep(1);
                } else if (simStep === 1) { // Mutate
                    setBacteria(prev => prev.map(b => b.status !== 'dead' ? { ...b, status: 'super' } : b));
                    setSimStep(2);
                } else if (simStep === 2) { // Regrow
                    setBacteria(Array(12).fill({ status: 'super' }));
                    setSimStep(3);
                } else { // Reset
                    setBacteria(Array(12).fill({ status: 'normal' }));
                    setSimStep(0);
                }
            };

            // --- Logic: Doctor Sim ---
            const handleDocChoice = (giveMeds) => {
                if (docScenario === 'sneeze') {
                    if (giveMeds) {
                        setDocResult({ type: 'bad', msg: 'éŒ¯èª¤ï¼é€™æ˜¯ç—…æ¯’æ€§æ„Ÿå†’ï¼ŒæŠ—ç”Ÿç´ æ²’ç”¨ï¼Œåè€Œæ®ºæ­»å¥½èŒï¼ğŸ˜«' });
                    } else {
                        setDocResult({ type: 'good', msg: 'æ­£ç¢ºï¼å¤šå–æ°´ä¼‘æ¯ï¼Œè®“å…ç–«ç³»çµ±å·¥ä½œå°±å¥½ï¼ğŸ‘' });
                    }
                    // Delay then show next scenario button or reset
                } else if (docScenario === 'fever') {
                    // This logic can be expanded later
                }
            };

            // --- Logic: Boss Battle ---
            const handleAnswer = (answer) => {
                const q = questions[currentQuestion];
                if (answer === q.a) {
                    // Correct
                    setBossHp(prev => Math.max(0, prev - 34));
                    setBattleLog(q.correctMsg);
                    setIsShaking(true);
                    setTimeout(() => setIsShaking(false), 500);
                    if (currentQuestion < questions.length - 1) {
                        setTimeout(() => setCurrentQuestion(c => c + 1), 1500);
                    } else {
                         setBossStatus('dead');
                         setBattleLog("æ­å–œï¼è¶…ç´šç´°èŒç‹è¢«ä½ æ¶ˆæ»…äº†ï¼");
                    }
                } else {
                    // Wrong
                    setBattleLog(q.wrongMsg);
                    setBossHp(prev => Math.min(100, prev + 10));
                }
            };

            const renderSlide = () => {
                const slide = slides[currentSlide];
                
                const Container = ({ children }) => (
                    <div className={`flex flex-col items-center justify-center h-full w-full p-4 md:p-8 text-center transition-colors duration-700 ${slide.bg} text-white relative z-10`}>
                        {children}
                    </div>
                );

                if (slide.type === 'title') {
                    return (
                        <Container>
                            <div className="mb-8">{slide.icon}</div>
                            <h1 className="text-4xl md:text-7xl font-black mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 leading-tight">
                                {slide.title}
                            </h1>
                            <p className="text-lg md:text-3xl text-gray-300 font-light mt-4">
                                {slide.subtitle}
                            </p>
                            <button onClick={nextSlide} className="mt-12 px-8 py-3 bg-blue-600 hover:bg-blue-500 rounded-full text-white font-bold shadow-lg animate-pulse text-lg">
                                é–‹å§‹æˆ°é¬¥
                            </button>
                        </Container>
                    );
                }

                if (slide.type === 'content') {
                    return (
                        <Container>
                            <h2 className="text-3xl md:text-5xl font-bold mb-8 text-yellow-300 tracking-wider">{slide.title}</h2>
                            
                            {slide.visual === 'vs' ? (
                                <div className="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8 mb-8 w-full max-w-4xl">
                                    <div className="bg-red-800/50 p-6 rounded-xl border-2 border-red-500 w-full md:w-1/2 hover:scale-105 transition-transform">
                                        <div className="text-6xl mb-2">ğŸ¦ </div>
                                        <h3 className="text-2xl font-bold text-red-300">ç´°èŒ (Bacteria)</h3>
                                        <p className="text-sm text-gray-300 mt-2">æœ‰ç´°èƒçµæ§‹ï¼Œæœƒç¹æ®–</p>
                                        <div className="mt-4 bg-red-600 text-white px-2 py-1 rounded text-sm font-bold">æŠ—ç”Ÿç´ æœ‰æ•ˆ âœ…</div>
                                    </div>
                                    <div className="text-4xl font-black text-white animate-pulse">VS</div>
                                    <div className="bg-gray-700/50 p-6 rounded-xl border-2 border-gray-500 w-full md:w-1/2 opacity-60 grayscale hover:grayscale-0 transition-all">
                                        <div className="text-6xl mb-2">ğŸ‘»</div>
                                        <h3 className="text-2xl font-bold text-gray-300">ç—…æ¯’ (Virus)</h3>
                                        <p className="text-sm text-gray-300 mt-2">åƒæ®­å±ï¼Œå¯„ç”Ÿæ‰èƒ½æ´»</p>
                                        <div className="mt-4 bg-gray-600 text-white px-2 py-1 rounded text-sm font-bold">æŠ—ç”Ÿç´ ç„¡æ•ˆ âŒ</div>
                                    </div>
                                </div>
                            ) : (
                                <div className="mb-8 animate-bounce-slow">{slide.icon}</div>
                            )}

                            <p className="text-xl md:text-4xl font-bold mb-6 leading-relaxed max-w-4xl">
                                {slide.content}
                            </p>
                            <div className="bg-black/30 p-6 rounded-lg border-l-8 border-yellow-400 text-left max-w-3xl">
                                <p className="text-lg md:text-2xl text-gray-200 italic">"{slide.subContent}"</p>
                            </div>
                        </Container>
                    );
                }

                if (slide.type === 'simulation') {
                    return (
                        <Container>
                            <h2 className="text-3xl md:text-4xl font-bold mb-4 text-green-300">{slide.title}</h2>
                            <div className="bg-slate-800 p-6 rounded-xl shadow-2xl mb-6 w-full max-w-2xl border border-slate-600">
                                <div className="grid grid-cols-4 gap-4 mb-4 h-48 items-center justify-items-center">
                                    {bacteria.map((b, idx) => (
                                        <div key={idx} className={`transition-all duration-500 transform ${b.status === 'dead' ? 'opacity-0 scale-0' : 'opacity-100 scale-100'}`}>
                                            {b.status === 'normal' && (
                                                <div className="w-10 h-10 bg-green-500 rounded-full animate-bounce shadow-[0_0_10px_#22c55e]" style={{animationDelay: `${idx * 0.1}s`}}>
                                                    <div className="w-full h-full flex items-center justify-center text-xs font-bold text-green-900">å¼±</div>
                                                </div>
                                            )}
                                            {b.status === 'super' && (
                                                <div className="w-12 h-12 bg-red-600 rounded-md animate-pulse shadow-[0_0_15px_#dc2626] border-2 border-yellow-400 rotate-45">
                                                    <div className="w-full h-full flex items-center justify-center -rotate-45 text-lg">ğŸ˜ˆ</div>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                                <div className="flex justify-between items-center bg-slate-900 p-3 rounded-lg">
                                    <div className="text-sm text-gray-400">
                                        ç‹€æ…‹: {simStep === 0 ? '1. æ„ŸæŸ“åˆæœŸ (ç´°èŒå¤§è»)' : 
                                                simStep === 1 ? '2. æŠ—ç”Ÿç´ æ”»æ“Š (å¼±è€…æ­»äº¡)' : 
                                                simStep === 2 ? '3. çªè®Š (å¼·è€…å€–å­˜)' : '4. å¤§åæ’² (å…¨æ˜¯è¶…ç´šç´°èŒ)'}
                                    </div>
                                    <button onClick={runSimulation} className="bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded text-sm font-bold transition-colors active:scale-95">
                                        {simStep === 3 ? 'é‡ç½®å¯¦é©—' : 'ä¸‹ä¸€æ­¥'}
                                    </button>
                                </div>
                            </div>
                            <p className="text-xl text-gray-300">
                                {simStep === 3 ? <span className="text-red-400 font-bold animate-pulse">ç³Ÿç³•ï¼ç¾åœ¨æŠ—ç”Ÿç´ å°å®ƒå€‘å®Œå…¨æ²’ç”¨äº†ï¼</span> : slide.subContent}
                            </p>
                        </Container>
                    );
                }

                if (slide.type === 'doctor_sim') {
                    return (
                        <Container>
                            <div className="absolute top-10 right-10 text-6xl opacity-20">ğŸ¥</div>
                            <h2 className="text-3xl md:text-5xl font-bold mb-8 text-emerald-300">{slide.title}</h2>
                            
                            <div className="bg-white text-black p-6 rounded-xl max-w-2xl w-full shadow-2xl mb-8 relative overflow-hidden">
                                <div className="flex items-start gap-4 mb-4">
                                    <div className="bg-gray-200 w-16 h-16 rounded-full flex-shrink-0 flex items-center justify-center text-3xl">ğŸ¤§</div>
                                    <div className="text-left">
                                        <div className="font-bold text-lg text-gray-700">ç—…äººï¼šå°æ˜ (14æ­²)</div>
                                        <div className="text-gray-600 mt-1">
                                            ã€Œé†«ç”Ÿï¼Œæˆ‘æµé¼»æ¶•ã€å–‰åš¨ç—›å…©å¤©äº†ï¼Œé«”æº« 37.2 åº¦ã€‚æ‹œè¨—çµ¦æˆ‘é‚£å€‹ã€ç²‰ç´…è‰²çš„è—¥ã€(æŠ—ç”Ÿç´ )ï¼Œæˆ‘æƒ³è¦å¿«é»å¥½å»æ‰“çƒï¼ã€
                                        </div>
                                    </div>
                                </div>
                                
                                {docResult ? (
                                    <div className={`p-4 rounded-lg text-lg font-bold text-white mb-4 animate-bounce ${docResult.type === 'good' ? 'bg-green-500' : 'bg-red-500'}`}>
                                        {docResult.msg}
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-2 gap-4 mt-6">
                                        <button onClick={() => handleDocChoice(true)} className="bg-red-500 hover:bg-red-600 text-white py-4 rounded-lg font-bold text-lg transition-transform hover:scale-105">
                                            ğŸ’Š é–‹æŠ—ç”Ÿç´ çµ¦ä»–
                                            <div className="text-xs font-normal mt-1">(é †è‘—ç—…äººçš„æ„)</div>
                                        </button>
                                        <button onClick={() => handleDocChoice(false)} className="bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg font-bold text-lg transition-transform hover:scale-105">
                                            ğŸ’§ å«ä»–å¤šå–æ°´ä¼‘æ¯
                                            <div className="text-xs font-normal mt-1">(å …æŒé†«ç™‚å°ˆæ¥­)</div>
                                        </button>
                                    </div>
                                )}
                                
                                {docResult && (
                                    <button onClick={() => { setDocResult(null); nextSlide(); }} className="mt-4 text-blue-600 font-bold underline">
                                        ç¹¼çºŒä¸‹ä¸€é—œ &rarr;
                                    </button>
                                )}
                            </div>
                        </Container>
                    );
                }

                if (slide.type === 'boss_battle') {
                    return (
                        <Container>
                            <h2 className="text-4xl font-black mb-2 text-red-500 tracking-widest">FINAL BOSS</h2>
                            
                            {/* Boss Area */}
                            <div className={`relative mb-8 transition-transform duration-100 ${isShaking ? 'animate-shake' : ''}`}>
                                <div className={`w-48 h-48 md:w-64 md:h-64 bg-purple-900 rounded-full flex items-center justify-center text-9xl border-8 transition-all duration-500 ${bossStatus === 'dead' ? 'scale-0 opacity-0' : 'scale-100'} ${bossHp < 30 ? 'border-red-600 animate-pulse' : 'border-purple-600'}`}>
                                    {bossStatus === 'dead' ? 'ğŸ’€' : 'ğŸ˜ˆ'}
                                </div>
                                {/* HP Bar */}
                                <div className="w-64 h-6 bg-gray-700 rounded-full mt-4 mx-auto overflow-hidden border-2 border-gray-500">
                                    <div 
                                        className="h-full bg-gradient-to-r from-red-500 to-yellow-500 transition-all duration-500"
                                        style={{ width: `${bossHp}%` }}
                                    ></div>
                                </div>
                                <div className="text-center font-bold mt-1">HP: {bossHp}/100</div>
                            </div>

                            {bossStatus === 'alive' ? (
                                <div className="bg-slate-800 p-6 rounded-xl max-w-2xl w-full border-t-4 border-blue-500">
                                    <div className="text-yellow-400 font-bold mb-2">æˆ°é¬¥æ—¥èªŒ: {battleLog}</div>
                                    <div className="text-xl font-bold mb-6 text-white">Q{currentQuestion + 1}: {questions[currentQuestion].q}</div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <button onClick={() => handleAnswer(true)} className="bg-gray-700 hover:bg-gray-600 p-4 rounded text-lg font-bold transition-colors">
                                            â­• æ˜¯ / å¯ä»¥
                                        </button>
                                        <button onClick={() => handleAnswer(false)} className="bg-gray-700 hover:bg-gray-600 p-4 rounded text-lg font-bold transition-colors">
                                            âŒ å¦ / ä¸è¡Œ
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div className="animate-bounce">
                                    <h3 className="text-4xl font-bold text-yellow-400 mb-4">VICTORY!</h3>
                                    <button onClick={nextSlide} className="bg-green-600 hover:bg-green-500 px-8 py-3 rounded-full font-bold text-xl shadow-lg">
                                        é ˜å–çå‹µ
                                    </button>
                                </div>
                            )}
                        </Container>
                    );
                }

                if (slide.type === 'list') {
                    return (
                        <Container>
                            <h2 className="text-4xl font-bold mb-8 text-green-400">{slide.title}</h2>
                            <div className="grid gap-4 w-full max-w-2xl text-left">
                                {slide.items.map((item, idx) => (
                                    <div key={idx} className="bg-white/10 p-4 rounded-xl flex items-center transform transition hover:scale-105 hover:bg-white/20 cursor-pointer border border-white/10">
                                        <div className="bg-red-500 w-10 h-10 rounded-full flex items-center justify-center font-bold mr-4 text-xl shadow-lg shrink-0">
                                            NO
                                        </div>
                                        <span className="text-xl md:text-2xl font-bold text-white">{item}</span>
                                    </div>
                                ))}
                            </div>
                        </Container>
                    );
                }

                return null;
            };

            return (
                <div className="w-full h-screen bg-black font-sans overflow-hidden relative selection:bg-pink-500 selection:text-white">
                    {/* èƒŒæ™¯å‹•ç•«è£é£¾ */}
                    <div className="absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden z-0">
                        <div className="absolute top-10 left-10 w-40 h-40 rounded-full bg-blue-600 opacity-20 blur-3xl animate-pulse"></div>
                        <div className="absolute bottom-20 right-10 w-60 h-60 rounded-full bg-purple-600 opacity-20 blur-3xl animate-pulse" style={{animationDelay: '1s'}}></div>
                    </div>

                    {/* Navigation Buttons */}
                    <button onClick={prevSlide} disabled={currentSlide === 0} className="hidden md:block absolute left-4 top-1/2 -translate-y-1/2 z-50 p-3 bg-white/10 hover:bg-white/30 rounded-full text-white disabled:opacity-0 transition-all hover:scale-110 backdrop-blur-sm">
                        <IconChevronLeft className="w-8 h-8" />
                    </button>
                    
                    <button onClick={nextSlide} disabled={currentSlide === slides.length - 1} className="hidden md:block absolute right-4 top-1/2 -translate-y-1/2 z-50 p-3 bg-white/10 hover:bg-white/30 rounded-full text-white disabled:opacity-0 transition-all hover:scale-110 backdrop-blur-sm">
                        <IconChevronRight className="w-8 h-8" />
                    </button>

                    {/* Progress Bar */}
                    <div className="absolute bottom-0 left-0 w-full h-2 bg-gray-800 z-50">
                        <div className="h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300" style={{ width: `${((currentSlide + 1) / slides.length) * 100}%` }}></div>
                    </div>

                    {/* Content */}
                    {renderSlide()}
                    
                    {/* Footer Info */}
                    <div className="absolute bottom-4 w-full text-center text-gray-500 text-xs pointer-events-none z-50">
                        Slide {currentSlide + 1} / {slides.length} | ä½¿ç”¨éµç›¤ â† â†’ æˆ–é»æ“Šç•«é¢é‚Šç·£åˆ‡æ›
                    </div>

                    {/* Mobile Touch Zones */}
                    <div className="md:hidden absolute top-0 left-0 w-1/6 h-full z-40" onClick={prevSlide}></div>
                    <div className="md:hidden absolute top-0 right-0 w-1/6 h-full z-40" onClick={nextSlide}></div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
